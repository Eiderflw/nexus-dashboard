module.exports=[18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},2580,(a,b,c)=>{"use strict";b.exports=a.r(18622)},67235,(a,b,c)=>{"use strict";b.exports=a.r(2580).vendored["react-ssr"].ReactJsxRuntime},93835,(a,b,c)=>{"use strict";b.exports=a.r(2580).vendored["react-ssr"].React},68206,a=>{"use strict";var b=a.i(93835);let c=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim(),d=a=>{let b=a.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,b,c)=>c?c.toUpperCase():b.toLowerCase());return b.charAt(0).toUpperCase()+b.slice(1)};var e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let f=(0,b.forwardRef)(({color:a="currentColor",size:d=24,strokeWidth:f=2,absoluteStrokeWidth:g,className:h="",children:i,iconNode:j,...k},l)=>(0,b.createElement)("svg",{ref:l,...e,width:d,height:d,stroke:a,strokeWidth:g?24*Number(f)/Number(d):f,className:c("lucide",h),...!i&&!(a=>{for(let b in a)if(b.startsWith("aria-")||"role"===b||"title"===b)return!0;return!1})(k)&&{"aria-hidden":"true"},...k},[...j.map(([a,c])=>(0,b.createElement)(a,c)),...Array.isArray(i)?i:[i]])),g=(a,e)=>{let g=(0,b.forwardRef)(({className:g,...h},i)=>(0,b.createElement)(f,{ref:i,iconNode:e,className:c(`lucide-${d(a).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${a}`,g),...h}));return g.displayName=d(a),g};a.s(["default",()=>g],68206)},1731,a=>{"use strict";let b=(0,a.i(68206).default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);a.s(["Shield",()=>b],1731)},21528,a=>{"use strict";let b=(0,a.i(68206).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],21528)},92724,a=>{"use strict";let b=(0,a.i(68206).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);a.s(["Trash2",()=>b],92724)},58363,a=>{"use strict";let b=(0,a.i(68206).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);a.s(["Clock",()=>b],58363)},80184,a=>{"use strict";let b=(0,a.i(68206).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);a.s(["User",()=>b],80184)},78571,a=>{"use strict";let b=(0,a.i(68206).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["AlertCircle",()=>b],78571)},94204,a=>{"use strict";let b=(0,a.i(68206).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);a.s(["X",()=>b],94204)},3793,a=>{"use strict";var b=a.i(67235),c=a.i(93835),d=a.i(1731),e=a.i(68206);let f=(0,e.default)("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);var g=a.i(21528),h=a.i(92724);let i=(0,e.default)("power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);var j=a.i(58363),k=a.i(80184),l=a.i(78571);let m=(0,e.default)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var n=a.i(94204);function o(){let[a,e]=(0,c.useState)(!1),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)([]),[u,v]=(0,c.useState)({key:"",expires_at:"",active:!0,note:""}),[w,x]=(0,c.useState)(!1);(0,c.useEffect)(()=>{e(!0)},[]);let y=async a=>{try{let b=await fetch(`/api/license/admin?token=${a}`);if(b.ok){let a=await b.ok?await b.json():[];t(a),r(!0)}else alert("Token de administrador inválido")}catch(a){console.error(a)}},z=async(a,b)=>{try{let c=await fetch(`/api/license/admin?token=${o}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:a,licenseData:b})});if(c.ok){let b=await c.json();t(b.licenses),("add"===a||"update"===a)&&(v({key:"",expires_at:"",active:!0,note:""}),x(!1))}}catch(a){console.error(a)}};return q?(0,b.jsx)("div",{className:"min-h-screen bg-slate-950 p-6 md:p-12 text-slate-300",children:(0,b.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-12",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[(0,b.jsx)(f,{className:"text-blue-500"})," Gestión de Licencias"]}),(0,b.jsx)("p",{className:"text-slate-500",children:"Administra el acceso de tus clientes al Nexus Dashboard"})]}),(0,b.jsx)("div",{className:"bg-slate-900 px-4 py-2 rounded-lg border border-slate-800 text-xs text-blue-400 font-mono",children:"ADMIN_TOKEN: ACTIVO"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,b.jsxs)("div",{className:"lg:col-span-1 border border-slate-800 bg-slate-900 rounded-xl p-6 h-fit sticky top-6",children:[(0,b.jsxs)("h2",{className:"text-lg font-bold text-white mb-6 flex items-center justify-between",children:[(0,b.jsxs)("span",{className:"flex items-center gap-2",children:[w?(0,b.jsx)(m,{className:"w-5 h-5 text-yellow-500"}):(0,b.jsx)(g.Plus,{className:"w-5 h-5 text-green-500"}),w?"Editar Licencia":"Crear Licencia"]}),w&&(0,b.jsx)("button",{onClick:()=>{x(!1),v({key:"",expires_at:"",active:!0,note:""})},className:"text-slate-500 hover:text-white transition-colors",children:(0,b.jsx)(n.X,{className:"w-4 h-4"})})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-semibold text-slate-500 mb-1",children:"CÓDIGO DE LLAVE"}),(0,b.jsx)("input",{type:"text",placeholder:"EJ: NEXUS-FREE-2026",className:`w-full bg-slate-950 border border-slate-800 rounded px-3 py-2 text-sm ${w?"opacity-50 cursor-not-allowed":""}`,value:u.key,onChange:a=>!w&&v({...u,key:a.target.value}),readOnly:w})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-semibold text-slate-500 mb-1",children:"FECHA DE VENCIMIENTO"}),(0,b.jsx)("input",{type:"datetime-local",className:"w-full bg-slate-950 border border-slate-800 rounded px-3 py-2 text-sm text-white",value:u.expires_at,onChange:a=>v({...u,expires_at:a.target.value})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-semibold text-slate-500 mb-1",children:"USUARIO / NOTA"}),(0,b.jsx)("input",{type:"text",placeholder:"Nombre del cliente...",className:"w-full bg-slate-950 border border-slate-800 rounded px-3 py-2 text-sm",value:u.note,onChange:a=>v({...u,note:a.target.value})})]}),(0,b.jsx)("button",{onClick:()=>z(w?"update":"add",u),className:`w-full font-bold py-2 rounded transition-colors text-sm ${w?"bg-yellow-600 hover:bg-yellow-500 text-black":"bg-green-600 hover:bg-green-500 text-white"}`,children:w?"Actualizar Licencia":"Generar Licencia"})]})]}),(0,b.jsxs)("div",{className:"lg:col-span-2 space-y-4",children:[s.map(c=>(0,b.jsxs)("div",{className:"bg-slate-900 border border-slate-800 rounded-xl p-5 flex flex-col md:flex-row justify-between items-center gap-4 hover:border-slate-700 transition-all",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:`p-3 rounded-lg border ${c.active?"bg-blue-500/10 border-blue-500/20":"bg-red-500/10 border-red-500/20"}`,children:(0,b.jsx)(f,{className:`w-6 h-6 ${c.active?"text-blue-500":"text-red-500"}`})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"font-bold text-white uppercase tracking-wider",children:c.key}),(0,b.jsx)("span",{className:`px-2 py-0.5 rounded-full text-[10px] uppercase font-bold ${c.active?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"}`,children:c.active?"Activo":"Baneado"}),c.active&&c.last_seen&&a&&(0,b.jsxs)("span",{className:`flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] uppercase font-bold ${new Date().getTime()-new Date(c.last_seen).getTime()<3e5?"bg-blue-500/20 text-blue-400":"bg-slate-800 text-slate-500"}`,children:[(0,b.jsx)("div",{className:`w-1.5 h-1.5 rounded-full ${new Date().getTime()-new Date(c.last_seen).getTime()<3e5?"bg-blue-400 animate-pulse":"bg-slate-600"}`}),new Date().getTime()-new Date(c.last_seen).getTime()<3e5?"ON":"OFF"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4 mt-1 text-xs text-slate-500",children:[(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(k.User,{className:"w-3 h-3"})," ",c.note||"Sin nota"]}),(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(j.Clock,{className:"w-3 h-3"})," Expiración: ",c.expires_at.replace("T"," ")]})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{onClick:()=>{var a;x(!0),v({...c,expires_at:(a=c.expires_at)?a.includes("T")?a.substring(0,16):`${a}T00:00`:""}),window.scrollTo({top:0,behavior:"smooth"})},className:"p-2 rounded hover:bg-slate-800 text-blue-400 transition-colors",title:"Editar detalles",children:(0,b.jsx)(m,{className:"w-5 h-5"})}),(0,b.jsx)("button",{onClick:()=>z("update",{...c,active:!c.active,reason:c.active?"Licencia suspendida por Admin":""}),className:`p-2 rounded hover:bg-slate-800 transition-colors ${c.active?"text-orange-500":"text-green-500"}`,title:c.active?"Suspender (Kill-Switch)":"Activar",children:(0,b.jsx)(i,{className:"w-5 h-5"})}),(0,b.jsx)("button",{onClick:()=>{let a=prompt("Razón del bloqueo:",c.reason||"");null!==a&&z("update",{...c,active:!1,reason:a})},className:"p-2 rounded hover:bg-slate-800 text-yellow-500 transition-colors",title:"Editar Razón",children:(0,b.jsx)(l.AlertCircle,{className:"w-5 h-5"})}),(0,b.jsx)("button",{onClick:()=>confirm("¿Eliminar esta licencia?")&&z("delete",c),className:"p-2 rounded hover:bg-slate-800 text-red-500 transition-colors",title:"Eliminar permanentemente",children:(0,b.jsx)(h.Trash2,{className:"w-5 h-5"})})]})]},c.key)),0===s.length&&(0,b.jsxs)("div",{className:"text-center py-20 bg-slate-900/50 rounded-xl border border-dashed border-slate-800",children:[(0,b.jsx)(f,{className:"w-12 h-12 text-slate-700 mx-auto mb-2 opacity-50"}),(0,b.jsx)("p",{className:"text-slate-600",children:"No hay licencias emitidas todavía."})]})]})]})]})}):(0,b.jsx)("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center p-4",children:(0,b.jsxs)("div",{className:"max-w-md w-full bg-slate-900 rounded-xl border border-slate-800 p-8 shadow-2xl",children:[(0,b.jsx)("div",{className:"flex justify-center mb-6",children:(0,b.jsx)("div",{className:"w-16 h-16 bg-blue-500/10 rounded-full flex items-center justify-center border border-blue-500/20",children:(0,b.jsx)(d.Shield,{className:"w-8 h-8 text-blue-500"})})}),(0,b.jsx)("h1",{className:"text-2xl font-bold text-center text-white mb-2",children:"Panel de Control"}),(0,b.jsx)("p",{className:"text-slate-400 text-center text-sm mb-8",children:"Ingresa tu llave maestra para gestionar licencias"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("input",{type:"password",placeholder:"Llave maestra de administrador...",className:"w-full bg-slate-950 border border-slate-800 text-white rounded-lg px-4 py-3 focus:border-blue-500 outline-none",value:o,onChange:a=>p(a.target.value)}),(0,b.jsx)("button",{onClick:()=>y(o),className:"w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 rounded-lg transition-colors",children:"Acceder al Sistema"})]})]})})}a.s(["default",()=>o],3793)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__35cb07fc._.js.map